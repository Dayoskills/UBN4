"use strict";(self.webpackChunkprocess_flow_manager=self.webpackChunkprocess_flow_manager||[]).push([[997],{1997:($e,k,l)=>{l.r(k),l.d(k,{RequestViewModule:()=>He});var u=l(9808),B=l(3889),h=l(1741),q=l(9300),f=l(8746),e=l(5e3),v=l(7472),T=l(1511),b=l(649),S=l(5899),R=l(6161);function E(o,r){1&o&&e._UZ(0,"mat-progress-bar",3)}function N(o,r){if(1&o&&(e.TgZ(0,"div",9)(1,"div",10)(2,"div",11),e._UZ(3,"app-default-picture",12),e.qZA(),e.TgZ(4,"div")(5,"p",13),e._uU(6),e.qZA(),e.TgZ(7,"p",14),e._uU(8),e.ALo(9,"date"),e.qZA()()(),e.TgZ(10,"div",15),e._uU(11),e.qZA()()),2&o){const t=r.$implicit,n=e.oxw(3);e.xp6(3),e.Q6J("firstName",t.commenter.fullName.split(" ")[1])("lastName",t.commenter.fullName.split(" ")[0]),e.xp6(3),e.Oqu(t.commenter.fullName),e.xp6(2),e.Oqu(e.xi3(9,5,n.parseDate(t.commentDate),"longDate")),e.xp6(3),e.hij(" ",t.commentText," ")}}function J(o,r){if(1&o&&(e.ynx(0),e.TgZ(1,"div",6)(2,"div")(3,"p",7),e._uU(4),e.qZA()(),e.YNc(5,N,12,8,"div",8),e.qZA(),e.BQk()),2&o){const t=r.$implicit;e.xp6(4),e.hij(" ",t.stageName," "),e.xp6(1),e.Q6J("ngForOf",t.comments)}}function L(o,r){if(1&o&&(e.TgZ(0,"div",4),e.YNc(1,J,6,2,"ng-container",5),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.trailWithComments.stages)}}let z=(()=>{class o{constructor(t,n,i){this.requestService=t,this.commentService=n,this.toastService=i,this.loading=!0,this.getComments=[]}ngOnInit(){this.requestService.getCurrentRequestId().pipe((0,q.h)(t=>!!t)).subscribe(t=>{this.requestId=t,this.getConversations(this.requestId)})}getConversations(t){this.commentService.fetchComments(t).pipe((0,f.x)(()=>this.loading=!1)).subscribe({next:n=>this.trailWithComments=n,error:n=>this.toastService.showErrorToast(n.message)})}parseDate(t){return(1e3*Number(t)).toString()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(v.r),e.Y36(T.O),e.Y36(b.k))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-request-conversations"]],decls:3,vars:2,consts:[[1,"w-100","p-3","dashboard-request-list"],["mode","indeterminate","class","progress",4,"ngIf"],["class","wrapper w-100 p-4 mx-auto d-flex flex-column",4,"ngIf"],["mode","indeterminate",1,"progress"],[1,"wrapper","w-100","p-4","mx-auto","d-flex","flex-column"],[4,"ngFor","ngForOf"],[1,"outer","p-3"],[1,"title","bold-2","mb-3","stage-name"],["class","comment w-100 d-flex flex-column p-3 mb-1",4,"ngFor","ngForOf"],[1,"comment","w-100","d-flex","flex-column","p-3","mb-1"],[1,"comment-header","d-flex","flex-row"],[1,"pic-wrap"],[3,"firstName","lastName"],[1,"title","bold-2","mb-0"],[1,"date","small-text","mb-0"],[1,"comment-text"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.YNc(1,E,1,0,"mat-progress-bar",1),e.YNc(2,L,2,1,"div",2),e.qZA()),2&t&&(e.xp6(1),e.Q6J("ngIf",n.loading),e.xp6(1),e.Q6J("ngIf",n.trailWithComments))},directives:[u.O5,S.pW,u.sg,R.B],pipes:[u.uU],styles:[".wrapper[_ngcontent-%COMP%], .comment[_ngcontent-%COMP%]{background-color:#fff;border-radius:5px;gap:1rem}.outer[_ngcontent-%COMP%]{background-color:#d3d3d3;border-radius:5px;gap:1rem}.comment[_ngcontent-%COMP%]{background-color:var(--white)}.comment-header[_ngcontent-%COMP%]{gap:1rem;height:2.5rem}.pic-wrap[_ngcontent-%COMP%]{height:2.2rem;width:2.2rem}.title[_ngcontent-%COMP%], .comment-text[_ngcontent-%COMP%]{font-size:14px;color:#14142bcc}.date[_ngcontent-%COMP%]{color:#14142bb3}.comment-text[_ngcontent-%COMP%]{font-size:13px}.stage-name[_ngcontent-%COMP%]{color:#14142b}"]}),o})();var g=l(3075),x=l(5585),F=l(5306),Q=l(8177),M=l(5245),P=l(7238),C=l(6688);const j=["fileInput"];function Y(o,r){1&o&&e._UZ(0,"mat-progress-bar",3)}function D(o,r){if(1&o&&(e.TgZ(0,"p",27),e._uU(1),e.ALo(2,"date"),e.qZA()),2&o){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",e.xi3(2,1,t.dateCompleted,"longDate")," ")}}function V(o,r){1&o&&e._UZ(0,"span",28)}function H(o,r){if(1&o&&(e.TgZ(0,"div",29),e._uU(1),e.qZA()),2&o){const t=e.oxw().$implicit,n=e.oxw(2);e.xp6(1),e.hij(" ",n.fileTypeErrorByStage[t.requestStageId]," ")}}function $(o,r){1&o&&(e.TgZ(0,"mat-icon",36),e._uU(1,"cancel"),e.qZA())}function G(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"div",30)(1,"mat-chip",31),e.NdJ("removed",function(){const s=e.CHM(t).$implicit,a=e.oxw().$implicit;return e.oxw(2).removeFile(a.requestStageId,s)}),e._UZ(2,"img",32),e.TgZ(3,"span",33),e._uU(4),e.qZA(),e.TgZ(5,"span",34),e._uU(6),e.qZA(),e.YNc(7,$,2,0,"mat-icon",35),e.qZA()()}if(2&o){const t=r.$implicit,n=e.oxw(3);e.xp6(1),e.Q6J("removable",n.removable),e.xp6(1),e.Q6J("src","assets/icons/"+t.fileIcon,e.LSH),e.xp6(2),e.Oqu(t.name),e.xp6(2),e.hij("",t.fileSize," KB"),e.xp6(1),e.Q6J("ngIf",n.removable)}}const W=function(o){return["status",o]};function K(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"div",5)(1,"div",6)(2,"div",7)(3,"mat-icon",8),e._uU(4,"schedule"),e.qZA()(),e.TgZ(5,"div",9)(6,"p",10)(7,"a",11),e._uU(8),e.qZA()(),e.YNc(9,D,3,4,"p",12),e.qZA()(),e.TgZ(10,"div",13)(11,"textarea",14),e.NdJ("ngModelChange",function(i){const a=e.CHM(t).$implicit;return e.oxw(2).stageComments[a.requestStageId]=i}),e.qZA(),e.TgZ(12,"div",15)(13,"label",16)(14,"input",17,18),e.NdJ("change",function(i){const a=e.CHM(t).$implicit;return e.oxw(2).onFileChange(a.requestStageId,i)}),e.qZA(),e.TgZ(16,"button",19),e.NdJ("click",function(){const s=e.CHM(t).$implicit;return e.oxw(2).clickFileUpload(s.requestStageId)})("change",function(i){const a=e.CHM(t).$implicit;return e.oxw(2).onFileChange(a.requestStageId,i)}),e._uU(17," Upload Document "),e.TgZ(18,"mat-icon",20),e._uU(19,"attach_file"),e.qZA()()(),e.TgZ(20,"div",21)(21,"button",22),e.NdJ("click",function(){const s=e.CHM(t).$implicit;return e.oxw(2).saveComment(s.requestStageId)}),e._uU(22," Send "),e.TgZ(23,"mat-icon",23),e._uU(24,"send"),e.qZA(),e.YNc(25,V,1,0,"span",24),e.qZA()()(),e.YNc(26,H,2,1,"div",25),e.YNc(27,G,8,5,"div",26),e.qZA()()}if(2&o){const t=r.$implicit,n=e.oxw(2);e.xp6(7),e.Q6J("routerLink",e.VKq(10,W,t.id)),e.xp6(1),e.Oqu(t.stageName),e.xp6(1),e.Q6J("ngIf",t.dateCompleted),e.xp6(2),e.Q6J("ngModel",n.stageComments[t.requestStageId]),e.xp6(3),e.MGl("id","upload-trail-",t.requestStageId,""),e.xp6(7),e.Q6J("matTooltip",n.getTooltipMessage(t.requestStageId))("disabled",!n.stageComments[t.requestStageId]||0===n.stageComments[t.requestStageId].length||n.saveLoading[t.requestStageId]),e.xp6(4),e.Q6J("ngIf",n.saveLoading[t.requestStageId]),e.xp6(1),e.Q6J("ngIf",n.fileTypeErrorByStage[t.requestStageId]),e.xp6(1),e.Q6J("ngForOf",n.filesByStage[t.requestStageId])}}function X(o,r){if(1&o&&(e.ynx(0),e.YNc(1,K,28,12,"div",4),e.BQk()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.trail.stages)}}let ee=(()=>{class o{constructor(t,n,i,s,a){this.requestService=t,this.currentUserService=n,this.commentService=i,this.externalSolicitorService=s,this.toastService=a,this.loading=!0,this.commentValue="",this.currentDocumentList=[],this.stageComments={},this.filesByStage={},this.currentDocumentListByStage={},this.saveLoading={},this.showEmailInput=!1,this.emailValue="",this.update="",this.reminder="",this.nextActionPlan="",this.externalSolicitorEmail=[],this.showEmailDropdown=!1,this.files=[],this.removable=!0,this.searchTextboxControl=new g.NI,this.selectedNoUsers=!1,this.currentFilesByStage={},this.fileTypeErrorByStage={}}ngOnInit(){this.user=this.currentUserService.userProfile,this.requestService.getCurrentRequestId().pipe((0,q.h)(t=>!!t)).subscribe(t=>{this.requestId=t,this.getRequestTrail(this.requestId)})}getRequestTrail(t){this.requestService.getRequestTrail(t).pipe((0,f.x)(()=>this.loading=!1)).subscribe({next:n=>{this.trail=n,this.trail.stages.forEach(i=>{i.dateCompleted&&(i.dateCompleted=(1e3*Number(i.dateCompleted)).toString()),this.stageComments[i.id]="",this.saveLoading[i.id]=!1,this.fileTypeErrorByStage[i.id]="",this.filesByStage[i.id]=[],this.currentDocumentListByStage[i.id]=[]})},error:n=>this.toastService.showErrorToast(n.message)})}onFileChange(t,n){var i;const s=n.target;if(s.files&&s.files.length){this.filesByStage[t]=this.filesByStage[t]||[],this.currentDocumentListByStage[t]=this.currentDocumentListByStage[t]||[];for(let a=0;a<s.files.length;a++){const c=s.files[a];if(c.size>10485760){this.fileTypeErrorByStage[t]="File too large. Max file size is 10MB.",this.setFileTypeErrorTimeout(t);continue}if(!c.name.includes("."))return this.fileTypeErrorByStage[t]="File type not allowed. Only jpg, jpeg, png, docx, xlsx, pdf, and pptx files are allowed.",void this.setFileTypeErrorTimeout(t);{const d=null===(i=c.name.split(".").pop())||void 0===i?void 0:i.toLowerCase();if(d&&!["jpg","jpeg","png","docx","xlsx","pdf","pptx"].includes(d))return this.fileTypeErrorByStage[t]="File type not allowed. Only jpg, jpeg, png, docx, xlsx, pdf, and pptx files are allowed.",void this.setFileTypeErrorTimeout(t)}const p=new FileReader;p.onload=()=>{let d=p.result;"string"==typeof d&&(d=d.replace(/^data:.*;base64,/,"")),this.currentFile=c,this.currentFile.fileIcon=(0,x.A5)(this.currentFile.type),this.currentFile.fileSize=Math.round(c.size/1024),this.currentFile.value=d,this.filesByStage[t].push(this.currentFile);const m={id:0,fileName:this.currentFile.name,fileType:this.currentFile.fileIcon,fileValues:d};this.currentDocumentListByStage[t].push({id:0,requestStageId:this.requestId,name:this.currentFile.name,value:d,fileType:(0,x.A5)(this.currentFile.type),url:this.currentFile.name,children:[]}),this.fileUpload=m},p.readAsDataURL(c)}}}setFileTypeErrorTimeout(t){setTimeout(()=>{this.fileTypeErrorByStage[t]=""},5e3)}removeFile(t,n){const i=this.filesByStage[t].indexOf(n);-1!==i&&(this.filesByStage[t].splice(i,1),this.resetFileInput(t))}resetFileInput(t){const i=document.getElementById(`upload-trail-${t}`);i&&(i.value="")}clickFileUpload(t){document.getElementById(`upload-trail-${t}`).click(),console.log(document)}getTooltipMessage(t){return this.stageComments[t]&&0!==this.stageComments[t].length?"":"Please type a comment before sending."}noBack(t){t.preventDefault()}clearSearchBox(){this.searchTextboxControl.setValue("")}saveComment(t){this.saveLoading[t]=!0;const n=(0,x.PI)(this.user,this.stageComments[t],this.currentDocumentListByStage[t]||[]);this.stageComments[t]||this.currentDocumentListByStage[t]&&this.currentDocumentListByStage[t].length>0?(this.commentService.saveComment(t,n).pipe((0,f.x)(()=>{this.saveLoading[t]=!1})).subscribe({next:i=>{this.commentValue="",this.toastService.showSuccessToast("Comment saved")},error:i=>this.toastService.showErrorToast(i.message)}),this.currentDocumentListByStage[t]&&this.currentDocumentListByStage[t].length>0&&(this.requestService.uploadDocument(this.fileUpload).subscribe({next:i=>{this.currentDocumentList=i},error:i=>this.toastService.showErrorToast(i.message)}),this.removeFile(t,this.currentFile)),this.stageComments[t]=""):(this.toastService.showWarningToast("Please provide a comment or attach a document."),this.saveLoading[t]=!1)}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(v.r),e.Y36(F.S),e.Y36(T.O),e.Y36(Q.$),e.Y36(b.k))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-request-trail"]],viewQuery:function(t,n){if(1&t&&e.Gf(j,5),2&t){let i;e.iGM(i=e.CRH())&&(n.fileInput=i.first)}},decls:3,vars:2,consts:[[1,"w-100","px-5","py-5","dashboard-request-list"],["mode","indeterminate","class","progress",4,"ngIf"],[4,"ngIf"],["mode","indeterminate",1,"progress"],["class","trail-wrapper p-4 d-flex flex-column",4,"ngFor","ngForOf"],[1,"trail-wrapper","p-4","d-flex","flex-column"],[1,"header","d-flex","flex-row"],[1,"clock-wrap"],[1,"icon"],[1,"text-wrap"],[1,"title","bold-2","mb-0","pointer"],[3,"routerLink"],["class","date small-text mb-0",4,"ngIf"],[1,"d-flex","flex-column","comment-wrap"],["cols","30","rows","4","placeholder","Type your message here",1,"comment",3,"ngModel","ngModelChange"],[1,"comment-icons","d-flex","flex-row","justify-content-end","align-items-center","py-1","px-3"],["for","upload-trail",1,"send","small-text","bold-2"],["type","file","multiple","","accept","image/*,.gif,.jpg,.jpeg,.png,.doc,.dot,.docx,.dotx,.docm,.dotm,.xls,.xlt,.xla,.xlsx,.xltx,.xlsm,.xltm,.xlam,.xlsb,.ppt,.pot,.pps,.ppa,.pptx,.potx,.ppsx,.ppam,.pptm,.potm,.ppsm,.odt,.rtf,.txt,.xml,application/pdf",3,"id","change"],["fileInput",""],[1,"btn","pointer",3,"click","change"],[1,"icon","pin-icon"],[1,"send","small-text","bold-2"],[1,"pointer",3,"matTooltip","disabled","click"],[1,"icon","pin-icon","send-icon"],["class","spinner-border spinner-border-sm",4,"ngIf"],["class","alert alert-danger","role","alert",4,"ngIf"],["class","file-row",4,"ngFor","ngForOf"],[1,"date","small-text","mb-0"],[1,"spinner-border","spinner-border-sm"],["role","alert",1,"alert","alert-danger"],[1,"file-row"],[1,"file-background",3,"removable","removed"],["alt","File Icon",1,"file-icon",3,"src"],[1,"file-name"],[1,"file-size"],["matChipRemove","",4,"ngIf"],["matChipRemove",""]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.YNc(1,Y,1,0,"mat-progress-bar",1),e.YNc(2,X,2,1,"ng-container",2),e.qZA()),2&t&&(e.xp6(1),e.Q6J("ngIf",n.loading),e.xp6(1),e.Q6J("ngIf",n.trail))},directives:[u.O5,S.pW,u.sg,M.Hw,h.yS,g.Fj,g.JJ,g.On,P.gM,C.HS,C.qH],pipes:[u.uU],styles:[".trail-wrapper[_ngcontent-%COMP%]{background-color:#f6f6f6;border-radius:5px;gap:1rem}.header[_ngcontent-%COMP%]{gap:1rem}.clock-wrap[_ngcontent-%COMP%]{width:2.4rem;height:2.4rem;background-color:#1d1f2e1a;border-radius:50%;text-align:center}.icon[_ngcontent-%COMP%]{vertical-align:middle;font-size:1.75rem;height:1.4rem;width:1.65rem}.pin-icon[_ngcontent-%COMP%]{font-size:1.2rem;height:1.2rem;cursor:pointer}.pin-icon[_ngcontent-%COMP%]:hover, .send[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]:hover{color:#fa6009e6}.title[_ngcontent-%COMP%]{font-size:14px;color:#14142b}.title[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]{color:unset;text-decoration:none}.title[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]:hover{text-decoration:underline}.date[_ngcontent-%COMP%]{color:#14142bb3}.comment-wrap[_ngcontent-%COMP%]{background:var(--white);border:.5px solid #C4C4C4;border-radius:5px}.comment[_ngcontent-%COMP%]{border:none;padding:5px 7px;font-size:13px}.comment[_ngcontent-%COMP%]::placeholder{font-size:.75rem;color:#14142b99}.comment-icons[_ngcontent-%COMP%]{border-top:.5px solid #C4C4C4;gap:.5rem}.send-icon[_ngcontent-%COMP%]{vertical-align:top}.send[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{outline:none;border:none}[id^=upload-trail-][_ngcontent-%COMP%]{display:none}.fact-icon[_ngcontent-%COMP%]{border-radius:10px;margin-right:1rem;width:32px;height:32px}.file-row[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-bottom:5px}.file-background[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:start;gap:10px;background-color:#fff}.file-icon[_ngcontent-%COMP%]{width:20px;height:20px}.file-name[_ngcontent-%COMP%], .file-size[_ngcontent-%COMP%]{display:inline}  .mat-tooltip{background-color:#dcdcdc;color:#ff4b4b!important}"]}),o})();var y=l(4327);function te(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"li",5),e._UZ(1,"img",6),e.TgZ(2,"div",7)(3,"a",8)(4,"span"),e._uU(5),e.qZA()()(),e.TgZ(6,"button",9),e.NdJ("click",function(){const s=e.CHM(t).$implicit;return e.oxw().downloadByUrl(s.downloadUrl)}),e._uU(7," Download "),e.qZA()()}if(2&o){const t=r.$implicit,n=e.oxw();e.xp6(1),e.Q6J("src","assets/icons/"+n.getIconForFileType(t.fileType),e.LSH),e.xp6(2),e.s9C("href",t.previewUrl,e.LSH),e.xp6(2),e.Oqu(t.name)}}let ne=(()=>{class o{constructor(t,n,i){this.requestService=t,this.commentService=n,this.toastService=i,this.loading=!0,this.documentFolders=[]}ngOnInit(){this.requestService.getCurrentRequestId().pipe((0,q.h)(t=>!!t)).subscribe(t=>{this.requestId=t,this.getDocuments()})}getIconForFileType(t){return(0,x.A5)(t)}getDocuments(){this.commentService.fetchDocument(this.requestId).pipe((0,f.x)(()=>this.loading=!1)).subscribe({next:t=>{this.documentFolders=t,this.loading=!1,console.log(t)},error:t=>this.toastService.showErrorToast(t.message)})}download(t){this.commentService.downloadDocument(t.url).subscribe(n=>{n instanceof Blob?this.handleBlob(n,t):"string"==typeof n?this.handleBase64String(n,t):console.error("Unsupported data format:",typeof n)})}downloadByUrl(t){window.open(t,"_blank")}handleBlob(t,n){const i=n.name,s=i.split(".").pop(),a=this.getContentTypeByExtension(s);if(!a)return void console.error("Unsupported file type:",s);const c=new Blob([t],{type:a});(0,y.saveAs)(c,i)}handleBase64String(t,n){const i=atob(t),s=new Array(i.length);for(let _=0;_<i.length;_++)s[_]=i.charCodeAt(_);const a=n.name,c=a.split(".").pop(),p=new Uint8Array(s),d=this.getContentTypeByExtension(c);if(!d)return void console.error("Unsupported file type:",c);const m=new Blob([p],{type:d}),w=new File([m],a);(0,y.saveAs)(w)}getContentTypeByExtension(t){return{pdf:"application/pdf",doc:"application/msword",docx:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",xls:"application/vnd.ms-excel",xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",jpg:"image/jpeg",png:"image/png",xml:"application/xml"}[t.toLowerCase()]}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(v.r),e.Y36(T.O),e.Y36(b.k))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-request-files"]],decls:6,vars:1,consts:[[1,"w-100","px-5","py-5","dashboard-request-list"],[1,"wrapper"],[1,"box-body","no-padding"],[1,"list-group"],["class","list-group-item d-flex align-items-center",4,"ngFor","ngForOf"],[1,"list-group-item","d-flex","align-items-center"],["alt","File Icon",1,"fact-icon",2,"width","30px","height","30px","margin-right","5px",3,"src"],[1,"flex-grow-1"],["target","_blank",3,"href"],[1,"btn","btn-danger",3,"click"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div")(3,"div",2)(4,"ul",3),e.YNc(5,te,8,3,"li",4),e.qZA()()()()()),2&t&&(e.xp6(5),e.Q6J("ngForOf",n.documentFolders))},directives:[u.sg],styles:[".wrapper[_ngcontent-%COMP%], .comment[_ngcontent-%COMP%]{background-color:#f6f6f6;border-radius:5px;gap:1rem}.comment[_ngcontent-%COMP%]{background-color:var(--white)}.comment-header[_ngcontent-%COMP%]{gap:1rem;height:2.5rem}.pic-wrap[_ngcontent-%COMP%]{height:2.2rem;width:2.2rem}.title[_ngcontent-%COMP%], .comment-text[_ngcontent-%COMP%]{font-size:14px;color:#14142bcc}.date[_ngcontent-%COMP%]{color:#14142bb3}.comment-text[_ngcontent-%COMP%]{font-size:13px}.stage-name[_ngcontent-%COMP%]{color:#14142b}"]}),o})();var oe=l(7322),ie=l(4107),re=l(508);const se=["fileInput"];function ce(o,r){1&o&&e._UZ(0,"mat-progress-bar",3)}function ae(o,r){if(1&o&&(e.TgZ(0,"mat-option",22),e._uU(1),e.qZA()),2&o){const t=r.$implicit;e.Q6J("value",t),e.xp6(1),e.Oqu(t)}}function le(o,r){1&o&&e._UZ(0,"span",23)}function pe(o,r){if(1&o&&(e.TgZ(0,"div",24),e._uU(1),e.qZA()),2&o){const t=e.oxw(2);e.xp6(1),e.hij(" ",t.fileTypeError," ")}}function de(o,r){1&o&&(e.TgZ(0,"mat-icon",30),e._uU(1,"file_open"),e.qZA())}function me(o,r){1&o&&(e.TgZ(0,"mat-icon",30),e._uU(1,"cancel"),e.qZA())}function ue(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"div",25)(1,"mat-chip",26),e.NdJ("removed",function(){const s=e.CHM(t).$implicit;return e.oxw(2).removeFileExtSol(s)}),e.YNc(2,de,2,0,"mat-icon",27),e.TgZ(3,"span",28),e._uU(4),e.qZA(),e._uU(5,", "),e.TgZ(6,"span",29),e._uU(7),e.qZA(),e.YNc(8,me,2,0,"mat-icon",27),e.qZA()()}if(2&o){const t=r.$implicit,n=e.oxw(2);e.xp6(1),e.Q6J("removable",n.removable),e.xp6(1),e.Q6J("ngIf",n.removable),e.xp6(2),e.Oqu(t.name),e.xp6(3),e.hij("",t.fileSize,"KB"),e.xp6(1),e.Q6J("ngIf",n.removable)}}function ge(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"div",39)(1,"p")(2,"span")(3,"mat-icon",40),e._uU(4,"file_open"),e.qZA(),e._uU(5),e.qZA(),e.TgZ(6,"button",41),e.NdJ("click",function(){const s=e.CHM(t).$implicit;return e.oxw(3).downloadExtSolDoc(s)}),e._uU(7," Download "),e.qZA()()()}if(2&o){const t=r.$implicit;e.xp6(5),e.hij(" ",t.filename," ")}}function fe(o,r){if(1&o&&(e.ynx(0),e.TgZ(1,"div",31)(2,"div",32)(3,"div",33),e._UZ(4,"app-default-picture",34),e.qZA(),e.TgZ(5,"div")(6,"p",35),e._uU(7),e.qZA(),e.TgZ(8,"p",36),e._uU(9),e.ALo(10,"date"),e.qZA()()(),e.TgZ(11,"div",37),e._uU(12),e.qZA(),e.TgZ(13,"div",37),e._uU(14),e.qZA(),e.YNc(15,ge,8,1,"div",38),e.qZA(),e.BQk()),2&o){const t=r.$implicit;e.xp6(4),e.Q6J("firstName",t.fullname.split(" ")[1]),e.xp6(3),e.Oqu(t.fullname),e.xp6(2),e.Oqu(e.xi3(10,6,t.dateAdded,"longDate")),e.xp6(3),e.hij(" ",t.update," "),e.xp6(2),e.hij(" ",t.nextActionPlan," "),e.xp6(1),e.Q6J("ngForOf",t.files)}}function he(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"div",4)(1,"div",5)(2,"textarea",6),e.NdJ("ngModelChange",function(i){return e.CHM(t),e.oxw().commentValue=i}),e.qZA(),e.TgZ(3,"div",7)(4,"mat-form-field")(5,"mat-select",8),e.NdJ("ngModelChange",function(i){return e.CHM(t),e.oxw().selectedSolicitors=i})("selectionChange",function(){return e.CHM(t),e.oxw().getExternalSolicitors()}),e.YNc(6,ae,2,2,"mat-option",9),e.qZA()(),e.TgZ(7,"label",10)(8,"input",11,12),e.NdJ("change",function(i){return e.CHM(t),e.oxw().onFileChangeExtSol(i)}),e.qZA(),e.TgZ(10,"button",13),e.NdJ("click",function(){return e.CHM(t),e.oxw().clickFileUploadExtSol()}),e._uU(11,"Upload Document "),e.TgZ(12,"mat-icon",14),e._uU(13,"attach_file"),e.qZA()()(),e.TgZ(14,"div",15)(15,"button",16),e.NdJ("click",function(){return e.CHM(t),e.oxw().saveComment()}),e._uU(16," Send "),e.TgZ(17,"mat-icon",17),e._uU(18,"send"),e.qZA(),e.YNc(19,le,1,0,"span",18),e.qZA()()(),e.YNc(20,pe,2,1,"div",19),e.YNc(21,ue,9,5,"div",20),e.qZA(),e.YNc(22,fe,16,9,"ng-container",21),e.qZA()}if(2&o){const t=e.oxw();e.xp6(2),e.Q6J("ngModel",t.commentValue),e.xp6(3),e.Q6J("ngModel",t.selectedSolicitors),e.xp6(1),e.Q6J("ngForOf",t.externalSolicitorEmail),e.xp6(9),e.Q6J("matTooltip",t.getTooltipMessage())("disabled",!t.commentValue||0===t.commentValue.length||t.saveLoading&&!t.selectedSolicitors||0===t.selectedSolicitors.length),e.xp6(4),e.Q6J("ngIf",t.saveLoading),e.xp6(1),e.Q6J("ngIf",t.fileTypeError),e.xp6(1),e.Q6J("ngForOf",t.files),e.xp6(1),e.Q6J("ngForOf",t.getComments)}}let _e=(()=>{class o{constructor(t,n,i){this.requestService=t,this.commentService=n,this.toastService=i,this.loading=!0,this.saveLoading=!1,this.getComments=[],this.externalSolicitorEmail=[],this.files=[],this.currentDocumentList=[],this.removable=!0,this.searchTextboxControl=new g.NI,this.selectedNoUsers=!1,this.commentValue="",this.emailValue="",this.update="",this.reminder="",this.nextActionPlan="",this.selectedSolicitors="",this.fileTypeError=""}ngOnInit(){this.requestService.getCurrentRequestId().pipe((0,q.h)(t=>!!t)).subscribe(t=>{this.requestId=t,this.getAllExternalSolicitorComment(this.requestId)}),this.requestService.getExternalSolicitors().pipe((0,f.x)(()=>this.loading=!1)).subscribe({next:t=>{this.externalSolicitorEmail=t},error:t=>this.toastService.showErrorToast(t.message)})}getAllExternalSolicitorComment(t){this.commentService.getAllExternalSolicitorComment(t).pipe((0,f.x)(()=>this.loading=!1)).subscribe({next:n=>this.getComments=n,error:n=>{this.toastService.showErrorToast(n.message)}})}parseDate(t){return(1e3*Number(t)).toString()}onFileChangeExtSol(t){var n;const i=t.target;if(i.files&&i.files.length)for(let s=0;s<i.files.length;s++){const a=i.files[s];if(a.size>10485760){this.fileTypeError="File too large. Max file size is 10MB.",this.setFileTypeErrorTimeout();continue}if(!a.name.includes("."))return this.fileTypeError="File type not allowed. Only jpg, jpeg, png, docx, xlsx, pdf, and pptx files are allowed.",void this.setFileTypeErrorTimeout();{const p=null===(n=a.name.split(".").pop())||void 0===n?void 0:n.toLowerCase();if(p&&!["jpg","jpeg","png","docx","xlsx","pdf","pptx"].includes(p))return this.fileTypeError="File type not allowed. Only jpg, jpeg, png, docx, xlsx, pdf, and pptx files are allowed.",void this.setFileTypeErrorTimeout()}const c=new FileReader;c.onload=()=>{let p=c.result;"string"==typeof p&&(p=p.replace(/^data:.*;base64,/,"")),this.currentFile=a,this.currentFile.fileIcon="",this.currentFile.fileSize=Math.round(a.size/1024),this.files.push(this.currentFile);const d={id:0,fileName:this.currentFile.name,fileType:"",fileValues:p};this.currentDocumentList.push({id:0,name:this.currentFile.name,value:p,fileType:"",url:this.currentFile.name}),this.fileUpload=d},c.readAsDataURL(a)}}setFileTypeErrorTimeout(){setTimeout(()=>{this.fileTypeError=""},5e3)}removeFileExtSol(t){const n=this.files.indexOf(t);-1!==n&&(this.files.splice(n,1),this.resetFileInput())}resetFileInput(){this.fileInput&&this.fileInput.nativeElement&&(this.fileInput.nativeElement.value=null)}clickFileUploadExtSol(){document.getElementById("uploadExtSol").click()}noBack(t){t.preventDefault()}clearSearchBox(){this.searchTextboxControl.setValue("")}showValue(t){this.externalSolicitorEmail=t.value,this.selectedNoUsers=!this.externalSolicitorEmail||!this.externalSolicitorEmail.length}getExternalSolicitors(){this.loading=!0,this.requestService.getExternalSolicitors().pipe((0,f.x)(()=>this.loading=!1)).subscribe({next:t=>{this.externalSolicitorEmail=t},error:t=>this.toastService.showErrorToast(t.message)})}getTooltipMessage(){return this.selectedSolicitors&&0!==this.selectedSolicitors.length&&this.commentValue?"":"Please type a comment and select a solicitor before sending."}saveComment(){if(this.selectedSolicitors.length>0){this.saveLoading=!0;const t=(0,x.Xo)(this.selectedSolicitors,this.requestId,this.commentValue,this.reminder,this.nextActionPlan,this.currentDocumentList);this.commentService.sendComment(t).pipe((0,f.x)(()=>{this.saveLoading=!1,this.resetForm()})).subscribe({next:n=>{this.toastService.showSuccessToast("Comment sent successfully")},error:n=>this.toastService.showErrorToast(n.message)})}}resetForm(){this.emailValue="",this.commentValue="",this.files=[],this.selectedSolicitors="",this.getAllExternalSolicitorComment(this.requestId)}downloadExtSolDoc(t){this.commentService.downloadDocument(t.url).subscribe(n=>{n instanceof Blob?this.handleBlob(n,t):"string"==typeof n?this.handleBase64String(n,t):console.error("Unsupported data format:",typeof n)})}handleBlob(t,n){const i=n.filename,s=i.split(".").pop(),a=this.getContentTypeByExtension(s);if(!a)return void console.error("Unsupported file type:",s);const c=new Blob([t],{type:a});(0,y.saveAs)(c,i)}handleBase64String(t,n){const i=atob(t),s=new Array(i.length);for(let _=0;_<i.length;_++)s[_]=i.charCodeAt(_);const a=n.filename,c=a.split(".").pop(),p=new Uint8Array(s),d=this.getContentTypeByExtension(c);if(!d)return void console.error("Unsupported file type:",c);const m=new Blob([p],{type:d}),w=new File([m],a);(0,y.saveAs)(w)}getContentTypeByExtension(t){return{pdf:"application/pdf",doc:"application/msword",docx:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",xls:"application/vnd.ms-excel",xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",jpg:"image/jpeg",png:"image/png",xml:"application/xml"}[t.toLowerCase()]}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(v.r),e.Y36(T.O),e.Y36(b.k))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-request-counsel-conversation"]],viewQuery:function(t,n){if(1&t&&e.Gf(se,5),2&t){let i;e.iGM(i=e.CRH())&&(n.fileInput=i.first)}},decls:3,vars:2,consts:[[1,"w-100","px-5","py-5","dashboard-request-list"],["mode","indeterminate","class","progress",4,"ngIf"],["class","wrapper w-100 p-4 mx-auto d-flex flex-column",4,"ngIf"],["mode","indeterminate",1,"progress"],[1,"wrapper","w-100","p-4","mx-auto","d-flex","flex-column"],[1,"d-flex","flex-column","comment-wrap"],["cols","30","rows","4","placeholder","Type your message here",1,"comment",3,"ngModel","ngModelChange"],[1,"comment-icons","d-flex","flex-row","justify-content-end","align-items-center","py-1","px-3"],["placeholder","Send to External Solicitor",3,"ngModel","ngModelChange","selectionChange"],[3,"value",4,"ngFor","ngForOf"],["for","uploadExtSol",1,"send","small-text","bold-2"],["type","file","id","uploadExtSol","multiple","","accept","image/*,.jpg,.jpeg,.png,.doc,.dot,.docx,.dotx,.docm,.dotm,.xls,.xlt,.xla,.xlsx,.xltx,.xlsm,.xltm,.xlam,.xlsb,.ppt,.pot,.pps,.ppa,.pptx,.potx,.ppsx,.ppam,.pptm,application/pdf",3,"change"],["fileInput",""],[1,"btn","pointer",3,"click"],[1,"icon","pin-icon"],[1,"send","small-text","bold-2"],[1,"pointer",3,"matTooltip","disabled","click"],[1,"icon","pin-icon","send-icon"],["class","spinner-border spinner-border-sm",4,"ngIf"],["class","alert alert-danger","role","alert",4,"ngIf"],["class","file-row mb-2",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],[3,"value"],[1,"spinner-border","spinner-border-sm"],["role","alert",1,"alert","alert-danger"],[1,"file-row","mb-2"],[1,"file-background",3,"removable","removed"],["matChipRemove","",4,"ngIf"],[1,"file-name"],[1,"file-size"],["matChipRemove",""],[1,"comment","w-100","d-flex","flex-column","p-3"],[1,"comment-header","d-flex","flex-row"],[1,"pic-wrap"],[3,"firstName"],[1,"title","bold-2","mb-0"],[1,"date","small-text","mb-0"],[1,"comment-text"],["class","file-row",4,"ngFor","ngForOf"],[1,"file-row"],[1,"icon"],[1,"download-btn","terminate-btn",3,"click"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.YNc(1,ce,1,0,"mat-progress-bar",1),e.YNc(2,he,23,9,"div",2),e.qZA()),2&t&&(e.xp6(1),e.Q6J("ngIf",n.loading),e.xp6(1),e.Q6J("ngIf",n.getComments))},directives:[u.O5,S.pW,g.Fj,g.JJ,g.On,oe.KE,ie.gD,u.sg,re.ey,M.Hw,P.gM,C.HS,C.qH,R.B],pipes:[u.uU],styles:[".wrapper[_ngcontent-%COMP%], .comment[_ngcontent-%COMP%]{background-color:#d3d3d3;border-radius:5px;gap:.5rem}.comment[_ngcontent-%COMP%]{background-color:var(--white)}.comment-header[_ngcontent-%COMP%]{gap:1rem;height:2.5rem}.pic-wrap[_ngcontent-%COMP%]{height:2.2rem;width:2.2rem}.title[_ngcontent-%COMP%], .comment-text[_ngcontent-%COMP%]{font-size:14px;color:#14142bcc}.comment-text[_ngcontent-%COMP%]{font-size:13px}.stage-name[_ngcontent-%COMP%]{color:#14142b}.trail-wrapper[_ngcontent-%COMP%]{background-color:#f6f6f6;border-radius:5px;gap:1rem}.header[_ngcontent-%COMP%]{gap:1rem}.clock-wrap[_ngcontent-%COMP%]{width:2.4rem;height:2.4rem;background-color:#1d1f2e1a;border-radius:50%;text-align:center}.icon[_ngcontent-%COMP%]{vertical-align:middle;font-size:1.75rem;height:1.4rem;width:1.65rem}.pin-icon[_ngcontent-%COMP%]{font-size:1.2rem;height:1.2rem;cursor:pointer}.pin-icon[_ngcontent-%COMP%]:hover, .send[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]:hover{color:#fa6009e6}.title[_ngcontent-%COMP%]{font-size:14px;color:#14142b}.title[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]{color:unset;text-decoration:none}.title[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]:hover{text-decoration:underline}.date[_ngcontent-%COMP%]{color:#14142bb3}.comment-wrap[_ngcontent-%COMP%]{background:var(--white);border:.5px solid #C4C4C4;border-radius:5px}.comment[_ngcontent-%COMP%]{border:none;padding:5px 7px;font-size:13px}.comment[_ngcontent-%COMP%]::placeholder{font-size:.75rem;color:#14142b99}.comment-icons[_ngcontent-%COMP%]{border-top:.5px solid #C4C4C4;gap:.5rem}.send-icon[_ngcontent-%COMP%]{vertical-align:top}.send[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{outline:none;border:none}#uploadExtSol[_ngcontent-%COMP%]{display:none}.fact-icon[_ngcontent-%COMP%]{border-radius:10px;margin-right:1rem;width:32px;height:32px}.file-background[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:start;gap:10px;background-color:#fff}.file-icon[_ngcontent-%COMP%]{width:20px;height:20px}.file-name[_ngcontent-%COMP%], .file-size[_ngcontent-%COMP%]{display:inline}  .mat-tooltip{background-color:#dcdcdc;color:#ff4b4b!important}.download-btn[_ngcontent-%COMP%]{background-color:#db414ae6;border:none;border-radius:4px;color:var(--white);font-size:.7rem;font-weight:600;padding:.3rem 1.5rem;text-align:center}.terminate-btn[_ngcontent-%COMP%]:hover{text-decoration:underline}.file-row[_ngcontent-%COMP%]{display:flex;align-items:center}.file-row[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:space-between;align-items:center}"]}),o})();var xe=l(9841),A=l(4004),I=l(9526),ve=l(8565),O=l(8966),be=l(3900);const Ce=["fileInput"];function qe(o,r){if(1&o&&(e.TgZ(0,"div",23),e._uU(1),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.hij(" ",t.fileTypeError," ")}}function Te(o,r){1&o&&(e.TgZ(0,"mat-icon",29),e._uU(1,"cancel"),e.qZA())}function we(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"mat-chip",24),e.NdJ("removed",function(){const s=e.CHM(t).$implicit;return e.oxw().removeFileSendBack(s)}),e.TgZ(1,"div",25),e._UZ(2,"img",26),e.TgZ(3,"p",27),e._uU(4),e.qZA(),e.YNc(5,Te,2,0,"mat-icon",28),e.qZA()()}if(2&o){const t=r.$implicit,n=e.oxw();e.Q6J("removable",n.removable),e.xp6(2),e.Q6J("src","assets/icons/"+t.fileIcon,e.LSH),e.xp6(2),e.AsE(" ",t.name,", ",t.fileSize," KB "),e.xp6(1),e.Q6J("ngIf",n.removable)}}function Me(o,r){1&o&&e._UZ(0,"span",30)}let ye=(()=>{class o{constructor(t,n,i,s,a,c){this.dialogRef=t,this.data=n,this.currentUserService=i,this.commentService=s,this.requestService=a,this.toastService=c,this.loading=!1,this.comment="",this.files=[],this.currentDocumentList=[],this.removable=!0,this.fileTypeError="",this.sendBackGetter=new e.vpe}ngOnInit(){this.user=this.currentUserService.userProfile}close(){this.dialogRef.close()}onFileChangeSendBack(t){var n,i;const s=t.target;if(!(null===(n=s.files)||void 0===n?void 0:n.length))return;const a=Array.from(s.files);for(let c=0;c<a.length;c++){const p=a[c];if(this.files.some(m=>m.name===p.name)||this.currentDocumentList.some(m=>m.name===p.name)){this.toastService.showErrorToast(`The file "${p.name}" has already been uploaded`);continue}if(p.size>10485760){this.toastService.showErrorToast("File too large. Max file size is 10MB.");continue}if(!p.name.includes(".")){this.toastService.showErrorToast("File type not allowed. Only jpg, jpeg, png, docx, xlsx, pdf, and pptx files are allowed.");continue}{const m=null===(i=p.name.split(".").pop())||void 0===i?void 0:i.toLowerCase();if(m&&!["jpg","jpeg","png","docx","xlsx","pdf","pptx"].includes(m)){this.toastService.showErrorToast("File type not allowed. Only jpg, jpeg, png, docx, xlsx, pdf, and pptx files are allowed.");continue}}const d=new FileReader;d.onload=()=>{let m=d.result;"string"==typeof m&&(m=m.replace(/^data:.*;base64,/,"")),this.currentFile=p,this.currentFile.fileIcon=(0,x.A5)(this.currentFile.type),this.currentFile.fileSize=Math.round(p.size/1024),this.files.push(this.currentFile);const w={id:0,fileName:this.currentFile.name,fileType:this.currentFile.type,fileValues:m};this.currentDocumentList.push({id:0,name:this.currentFile.name,value:m,fileType:(0,x.A5)(this.currentFile.type),url:this.currentFile.name,children:[]}),this.fileUpload=w},d.readAsDataURL(p)}this.resetFileInput()}setFileTypeErrorTimeout(){setTimeout(()=>{this.fileTypeError=""},5e3)}removeFileSendBack(t){const n=this.files.indexOf(t);-1!==n&&(this.files.splice(n,1),this.resetFileInput())}resetFileInput(){this.fileInput&&this.fileInput.nativeElement&&(this.fileInput.nativeElement.value=null)}clickFileUploadSendBack(){document.getElementById("uploadSendBack").click()}sendBack(){this.loading=!0;const t=(0,x.PI)(this.user,this.comment,this.currentDocumentList);this.comment||this.currentDocumentList&&this.currentDocumentList.length>0?(this.commentService.saveComment(this.data.previousRequestStageId,t).pipe((0,be.w)(()=>this.requestService.sendBackRequest(this.data.requestId,this.data.previousStageId)),(0,f.x)(()=>this.loading=!1)).subscribe({next:()=>{this.toastService.showSuccessToast("Request has been sent back"),this.sendBackGetter.emit(),this.close()},error:n=>this.toastService.showErrorToast(n.message)}),this.currentDocumentList&&this.currentDocumentList.length>0&&(this.requestService.uploadDocument(this.fileUpload).subscribe({next:n=>{this.currentDocumentList=n},error:n=>this.toastService.showErrorToast(n.message)}),this.removeFileSendBack(this.currentFile))):(this.toastService.showWarningToast("Please provide a comment or attach a document."),this.loading=!1)}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(O.so),e.Y36(O.WI),e.Y36(F.S),e.Y36(T.O),e.Y36(v.r),e.Y36(b.k))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-send-back-request"]],viewQuery:function(t,n){if(1&t&&e.Gf(Ce,5),2&t){let i;e.iGM(i=e.CRH())&&(n.fileInput=i.first)}},outputs:{sendBackGetter:"sendBackGetter"},decls:37,vars:6,consts:[[1,"main-container","w-100"],[1,"container"],[1,"close-btn"],["mat-dialog-close","",1,"x-btn","pointer","bold-1"],[1,"exp-icon"],[1,"primary-header","bold-2"],[1,"form","mt-2"],[1,"dailog-box"],[1,"tertiary-header","bold-2"],["cols","30","rows","10",3,"ngModel","ngModelChange"],[1,"mt-3","pt-2","divider"],[1,"attach-doc"],["for","uploadSendBack"],["type","file","id","uploadSendBack","multiple","","accept","image/*,.jpg,.jpeg,.png,.doc,.dot,.docx,.dotx,.docm,.dotm,.xls,.xlt,.xla,.xlsx,.xltx,.xlsm,.xltm,.xlam,.xlsb,.ppt,.pot,.pps,.ppa,.pptx,.potx,.ppsx,.ppam,.pptm,application/pdf",3,"change"],["fileInput",""],[1,"btn",3,"click"],["class","alert alert-danger","role","alert",4,"ngIf"],[1,"mt-3","row"],["class","file-background col-12 my-2",3,"removable","removed",4,"ngFor","ngForOf"],[1,"foot-btns","mt-4"],[1,"btn","cancel-btn","bold-1",3,"disabled","click"],[1,"btn","send-btn","bold-2",3,"disabled","click"],["class","spinner-border spinner-border-sm",4,"ngIf"],["role","alert",1,"alert","alert-danger"],[1,"file-background","col-12","my-2",3,"removable","removed"],[1,"d-flex","flex-row","align-items-center"],["alt","File Icon",1,"fact-icon",3,"src"],[1,"mb-0"],["matChipRemove","",4,"ngIf"],["matChipRemove",""],[1,"spinner-border","spinner-border-sm"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div")(3,"div",2)(4,"button",3)(5,"mat-icon",4),e._uU(6,"close"),e.qZA()()(),e.TgZ(7,"h1",5),e._uU(8,"Send Back Request"),e.qZA()(),e.TgZ(9,"div",6)(10,"div")(11,"div",7)(12,"p",8)(13,"label"),e._uU(14,"Add a comment about why you are sending back this request"),e.qZA()(),e.TgZ(15,"textarea",9),e.NdJ("ngModelChange",function(s){return n.comment=s}),e.qZA()()(),e.TgZ(16,"div",10)(17,"p",11),e._uU(18,"Attach document(s)."),e.qZA(),e.TgZ(19,"p"),e._uU(20," Accepted Document Type: png, jpg, docx, xlsx, pdf, pptx"),e.qZA(),e.TgZ(21,"p"),e._uU(22," Maximum Size: 10MB"),e.qZA(),e.TgZ(23,"label",12)(24,"input",13,14),e.NdJ("change",function(s){return n.onFileChangeSendBack(s)}),e.qZA(),e.TgZ(26,"button",15),e.NdJ("click",function(){return n.clickFileUploadSendBack()}),e._uU(27,"Upload documents"),e.qZA()(),e.YNc(28,qe,2,1,"div",16),e.TgZ(29,"div",17),e.YNc(30,we,6,5,"mat-chip",18),e.qZA()(),e.TgZ(31,"div",19)(32,"button",20),e.NdJ("click",function(){return n.close()}),e._uU(33,"Cancel"),e.qZA(),e.TgZ(34,"button",21),e.NdJ("click",function(){return n.sendBack()}),e._uU(35,"Send Back "),e.YNc(36,Me,1,0,"span",22),e.qZA()()()()()),2&t&&(e.xp6(15),e.Q6J("ngModel",n.comment),e.xp6(13),e.Q6J("ngIf",n.fileTypeError),e.xp6(2),e.Q6J("ngForOf",n.files),e.xp6(2),e.Q6J("disabled",n.loading),e.xp6(2),e.Q6J("disabled",n.loading),e.xp6(2),e.Q6J("ngIf",n.loading))},directives:[O.ZT,M.Hw,g.Fj,g.JJ,g.On,u.O5,u.sg,C.HS,C.qH],styles:[".main-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-bottom:5vh;background-color:var(--white);padding:1.5rem 2.5rem 1.25rem}.container[_ngcontent-%COMP%]{height:100%;display:flex;flex-direction:column;justify-content:space-between}.close-btn[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:end;margin-bottom:1rem}.x-btn[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;color:#3447f4;background-color:var(--white);border:none;font-size:1rem}.x-btn[_ngcontent-%COMP%]:hover, .x-btn[_ngcontent-%COMP%]:active{transform:scale(1.05)}.primary-header[_ngcontent-%COMP%]{font-size:1.4rem;color:#000}.tertiary-header[_ngcontent-%COMP%]{font-size:.875rem;color:#1d1f2e;margin-bottom:.5rem}.details[_ngcontent-%COMP%]{font-size:1rem;color:gray;margin-bottom:0}.dailog-box[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%], .dailog-box[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:100%;height:8.5rem;font-weight:400;font-family:inherit;font-size:.9rem;padding:.5rem 1.25rem;color:#1d1f2ecc;border:1px solid rgba(0,0,0,.2);border-radius:4px;margin-bottom:1rem}.form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:100%;padding:.75rem;font-size:1.1rem;font-family:inherit;color:#1d1f2ecc;background-color:#fff;border:1px solid rgba(0,0,0,.2);border-radius:4px;margin-bottom:1rem}.attach-doc[_ngcontent-%COMP%]{font-weight:600;font-size:.9rem;color:var(--black-3);margin-bottom:.9rem}.btn[_ngcontent-%COMP%]{padding:.6rem 2.5rem;border:1px dashed #bababa;border-radius:5px;background-color:#0000000d;transition:.2s;cursor:pointer}.btn[_ngcontent-%COMP%]:hover{background-color:gray;color:var(--white)}.foot-btns[_ngcontent-%COMP%]{display:flex;justify-content:space-between;box-shadow:inset 0 1px #c3c3c340;padding-top:1.25rem}.divider[_ngcontent-%COMP%]{box-shadow:inset 1px 1px 1px #c3c3c340}.cancel-btn[_ngcontent-%COMP%]{font-size:.9rem;color:#1d1f2e;background-color:var(--white);border:.1rem solid rgba(0,0,0,.2);box-shadow:inset 0 1px #c3c3c340}.cancel-btn[_ngcontent-%COMP%]:hover{color:var(--white);background-color:var(--black-3)}.send-btn[_ngcontent-%COMP%]{font-size:.9rem;color:var(--white);background-color:#de535b;border:.1rem solid rgba(0,0,0,.2)}.send-btn[_ngcontent-%COMP%]:hover{color:var(--white);background-color:var(--black-3)}button.mat-menu-item[_ngcontent-%COMP%]:hover{background-color:#696969;color:var(--white)}.send-menu[_ngcontent-%COMP%]{list-style:none}#uploadRequest[_ngcontent-%COMP%]{display:none}.fact-icon[_ngcontent-%COMP%]{border-radius:10px;margin-right:1rem;width:32px;height:32px}  div[role=listbox]{min-width:100%!important;background-color:#fdfbfb}  .mat-checkbox .mat-checkbox-frame{border-color:#bababa;background-color:#0000000d;border-width:1px;border-style:dashed}  .mat-checkbox-checked.mat-accent .mat-checkbox-background{background-color:#de535b!important}  .mat-step-icon{background-color:#db414ae6;color:var(--white)}  .mat-horizontal-stepper-header{padding-left:8px!important}  .mat-horizontal-content-container{padding:0!important}  .mat-datepicker-content .mat-calendar,   .mat-autocomplete-panel,   .mat-select-panel-wrap{color:var(--white)}  .mat-calendar-body-cell-content:hover{border-color:var(--white);color:var(--white)}  .mat-option:hover, .mat-option.mat-selected[_ngcontent-%COMP%]:hover{background-color:#de535b!important;color:var(--white)}@media screen and (max-width: 1280px){.close-btn[_ngcontent-%COMP%]{right:25%}}mat-icon[_ngcontent-%COMP%]{vertical-align:middle}  div[role=listbox]{padding-top:10px}  .mat-form-field-infix{width:33rem!important}  .mat-select-panel{margin-left:40px!important}.file-background[_ngcontent-%COMP%]{background-color:#fff}.asterisk[_ngcontent-%COMP%]{color:red;font-size:1.1rem}","#uploadSendBack[_ngcontent-%COMP%]{display:none}.fact-icon[_ngcontent-%COMP%]{border-radius:10px;margin-right:1rem;width:32px;height:32px}.file-row[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-bottom:5px}.file-background[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:start;gap:10px;background-color:#fff}.file-icon[_ngcontent-%COMP%]{width:20px;height:20px}.file-name[_ngcontent-%COMP%], .file-size[_ngcontent-%COMP%]{display:inline}  .mat-tooltip{background-color:#dcdcdc;color:#ff4b4b!important}.close-btn[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:end;margin-bottom:1rem}.x-btn[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;color:#3447f4;background-color:var(--white);border:none;font-size:1rem}.x-btn[_ngcontent-%COMP%]:hover, .x-btn[_ngcontent-%COMP%]:active{transform:scale(1.05)}"]}),o})();var Oe=l(9922),Z=l(2181),U=l(3251);function Se(o,r){1&o&&(e.TgZ(0,"span"),e._uU(1,"Request Completed"),e.qZA())}function Pe(o,r){1&o&&(e.TgZ(0,"p"),e._uU(1,"This Request Is Terminated."),e.qZA())}function Ze(o,r){if(1&o&&(e.TgZ(0,"button",26)(1,"mat-icon",27),e._uU(2,"reply"),e.qZA(),e.TgZ(3,"span",28),e._uU(4,"Send Back"),e.qZA()()),2&o){e.oxw();const t=e.MAs(9);e.Q6J("matMenuTriggerFor",t)}}function ke(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"button",29),e.NdJ("click",function(){const s=e.CHM(t).$implicit;return e.oxw(2).openSendBackModal(s)}),e._uU(1),e.qZA()}if(2&o){const t=r.$implicit;e.xp6(1),e.hij(" ",t.previousStageName," ")}}function Re(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"div",12)(1,"button",30),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).openTreatRequestModal()}),e._uU(2," Treat Request "),e.qZA()()}}function Fe(o,r){if(1&o&&(e.TgZ(0,"div")(1,"p",18)(2,"span"),e._uU(3,"Current Stage: "),e.qZA(),e.TgZ(4,"span",19),e._uU(5),e.qZA()()()),2&o){const t=e.oxw().$implicit;e.xp6(5),e.Oqu(t.stage.stage.stageName)}}function Ae(o,r){if(1&o&&(e.TgZ(0,"div"),e.YNc(1,Fe,6,1,"div",10),e.qZA()),2&o){const t=r.$implicit;e.xp6(1),e.Q6J("ngIf",t.stage.isCurrent)}}function Ie(o,r){if(1&o&&(e.TgZ(0,"div"),e.YNc(1,Ae,2,1,"div",31),e.qZA()),2&o){const t=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",t.currentRequestStrip.stageStripMappings)}}const Ue=function(){return["report"]};function Be(o,r){1&o&&(e.TgZ(0,"div",35)(1,"p",36)(2,"a",37),e._uU(3,"View Report"),e.qZA()()()),2&o&&(e.xp6(2),e.Q6J("routerLink",e.DdM(1,Ue)))}function Ee(o,r){if(1&o&&(e.TgZ(0,"div",32)(1,"h2",33),e._uU(2),e.qZA(),e.YNc(3,Be,4,2,"div",34),e.qZA()),2&o){const t=e.oxw(2);e.xp6(2),e.hij(" ",t.currentRequest.requestName," "),e.xp6(1),e.Q6J("ngIf",null==t.currentRequest.permissions?null:t.currentRequest.permissions.canEdit)}}function Ne(o,r){if(1&o&&(e.TgZ(0,"div",8)(1,"small",9),e.YNc(2,Se,2,0,"span",10),e.qZA(),e.YNc(3,Pe,2,0,"p",10),e.TgZ(4,"div",11),e._UZ(5,"div",12),e.TgZ(6,"div",13),e.YNc(7,Ze,5,1,"button",14),e.TgZ(8,"mat-menu",null,15),e.YNc(10,ke,2,1,"button",16),e.qZA(),e.YNc(11,Re,3,0,"div",17),e.qZA()(),e.TgZ(12,"p",18)(13,"span"),e._uU(14),e.qZA(),e.TgZ(15,"span",19),e._uU(16),e.qZA()(),e.YNc(17,Ie,2,1,"div",10),e.TgZ(18,"div",20),e.YNc(19,Ee,4,2,"div",21),e.TgZ(20,"div",22)(21,"mat-icon",23),e._uU(22,"schedule"),e.qZA(),e.TgZ(23,"p",24)(24,"span",25),e._uU(25,"Timeline"),e.qZA(),e.TgZ(26,"span",19),e._uU(27),e.ALo(28,"date"),e.qZA()()()()()),2&o){const t=e.oxw();e.xp6(2),e.Q6J("ngIf",t.currentRequest.lastStage&&t.currentRequest.treated),e.xp6(1),e.Q6J("ngIf",t.currentRequest.isTerminated),e.xp6(4),e.Q6J("ngIf",!t.currentRequest.treated),e.xp6(3),e.Q6J("ngForOf",t.currentRequest.previousStages),e.xp6(1),e.Q6J("ngIf",!t.currentRequest.treated),e.xp6(3),e.Oqu(null==t.currentCategory?null:t.currentCategory.categoryName),e.xp6(2),e.Oqu(null==t.currentProcess?null:t.currentProcess.menuName),e.xp6(1),e.Q6J("ngIf",t.currentRequestStrip),e.xp6(2),e.Q6J("ngIf",t.currentRequest),e.xp6(8),e.Oqu(e.xi3(28,10,t.today,"longDate"))}}function Je(o,r){if(1&o&&e._UZ(0,"div",40),2&o){const t=r.$implicit,n=e.oxw(2);e.ekj("green",t.stage.isTreated&&!t.stage.isCurrent||t.stage.isTreated&&t.stage.isCurrent&&n.currentRequestStrip.isLastStage)("orange",t.stage.isCurrent&&!n.currentRequestStrip.isLastStage||!t.stage.isTreated&&t.stage.isCurrent&&n.currentRequestStrip.isLastStage)("grey",!t.stage.isCurrent&&!t.stage.isTreated),e.Q6J("matTooltip",t.stage.stage.stageDescription)}}function Le(o,r){if(1&o&&(e.TgZ(0,"div",38),e.YNc(1,Je,1,7,"div",39),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.currentRequestStrip.stageStripMappings)}}const ze=function(o){return["./",o]},Qe=function(){return{exact:!0}};function je(o,r){if(1&o&&(e.TgZ(0,"a",41,42),e._uU(2),e.qZA()),2&o){const t=r.$implicit,n=e.MAs(1);e.Q6J("active",n.isActive)("routerLink",e.VKq(4,ze,t.id))("routerLinkActiveOptions",e.DdM(6,Qe)),e.xp6(2),e.hij(" ",t.name," ")}}const Ye=[{path:"",component:(()=>{class o{constructor(t,n,i,s,a,c){this.route=t,this.router=n,this.menuService=i,this.requestService=s,this.dialog=a,this.toastService=c,this.loading=!0,this.today=new Date,this.requestLinks=[{id:"trail",name:"Request Trail"},{id:"internal-conversations",name:"Internal Conversations"},{id:"counsel-conversations",name:"External Counsel Conversations"},{id:"files",name:"Files/Folders"}],this.activeLink=this.requestLinks[0],this.currentCategory=null,this.previousStages=[],this.isInitializing=!1}ngOnInit(){if(this.isInitializing)return;this.isInitializing=!0;const t=Number(this.route.snapshot.paramMap.get("id")),n=Number(this.route.snapshot.paramMap.get("process-id")),i=Number(this.route.snapshot.paramMap.get("request-id"));(0,xe.a)([this.menuService.getCategory(t),this.menuService.getSubCategories(t)]).pipe((0,A.U)(c=>{var p;return{category:c[0],process:null===(p=c[1])||void 0===p?void 0:p.find(d=>d.id==n)}}),(0,f.x)(()=>{console.log("RequestViewComponent: combineLatest finalized"),this.loading=!1,this.isInitializing=!1})).subscribe({next:c=>{this.currentCategory=c.category,this.currentProcess=c.process},error:c=>{console.error("RequestViewComponent: Error fetching category/process",c),this.toastService.showErrorToast(c.message||"Failed to load category/process")}}),this.router.events.pipe((0,q.h)(c=>c instanceof h.m2),(0,A.U)(c=>c.urlAfterRedirects.split("?")[0])).subscribe(c=>{const p=this.requestLinks.find(d=>c.endsWith(d.id));p&&(this.activeLink=p,this.loadTabData(this.activeLink.id,i))});const s=this.router.url.split("?")[0],a=this.requestLinks.find(c=>s.endsWith(c.id));a?(this.activeLink=a,this.loadTabData(this.activeLink.id,i)):(this.activeLink=this.requestLinks[0],this.loadTabData(this.activeLink.id,i)),this.getRequest(i),this.getRequestProgress(i)}loadTabData(t,n){}getRequest(t){this.requestService.getRequest(t).subscribe({next:n=>{this.currentRequest=n,localStorage.setItem("newReqDataStore",JSON.stringify({requestId:null==n?void 0:n.id,stageId:n.currentStageId,treatMode:!0,isTreated:n.treated})),this.requestService.setCurrentRequestId(this.currentRequest.id)},error:n=>{console.error("RequestViewComponent: Error fetching request",n),this.toastService.showErrorToast(n.message||"Failed to load request")}})}getRequestProgress(t){this.requestService.getRequestProgress(t).subscribe({next:n=>{this.currentRequestStrip=n,this.findPreviousStages()},error:n=>{console.error("RequestViewComponent: Error fetching request progress",n),this.toastService.showErrorToast(n.message||"Failed to load request progress")}})}openTreatRequestModal(){var t,n;let i=this.dialog.open(ve.r,Object.assign(Object.assign({},I.NQ),{data:{requestId:null===(t=this.currentRequest)||void 0===t?void 0:t.id,stageId:null===(n=this.currentRequest)||void 0===n?void 0:n.currentStageId,treatMode:!0}}));const s=i.componentInstance.formSaveResultGetter.subscribe(()=>{this.isInitializing||(console.log("RequestViewComponent: Form saved, triggering ngOnInit"),this.ngOnInit())});i.afterClosed().subscribe(()=>{console.log("RequestViewComponent: Modal closed"),s.unsubscribe()})}openSendBackModal(t){var n;let i=this.dialog.open(ye,Object.assign(Object.assign({},I.NQ),{data:{requestId:null===(n=this.currentRequest)||void 0===n?void 0:n.id,previousRequestStageId:t.previousRequestStageId,previousStageId:t.previousStageId}}));const s=i.componentInstance.sendBackGetter.subscribe(()=>{this.isInitializing||(console.log("RequestViewComponent: Send back triggered, calling ngOnInit"),this.ngOnInit())});i.afterClosed().subscribe(()=>{console.log("RequestViewComponent: Send back modal closed"),s.unsubscribe()})}findPreviousStages(){var t;if(!(null===(t=this.currentRequestStrip)||void 0===t?void 0:t.stageStripMappings))return void console.warn("RequestViewComponent: No stage strip mappings found");const n=this.currentRequestStrip.stageStripMappings,i=n.findIndex(s=>s.stage.isCurrent);this.previousStages=i>=2?[n[i-2].stage.stage.stageName,n[i-1].stage.stage.stageName]:1===i?["Send back to Requester"]:[]}trackByFn(t,n){return n.id}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(h.gz),e.Y36(h.F0),e.Y36(Oe.h),e.Y36(v.r),e.Y36(O.uw),e.Y36(b.k))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-request-view"]],decls:10,vars:3,consts:[[1,"main-bar","px-4"],[1,"sections"],[1,"navigation"],["class","nav-container",4,"ngIf"],["class","color-bar",4,"ngIf"],[1,"tab-panel","py-2"],["mat-tab-nav-bar",""],["mat-tab-link","","routerLinkActive","",3,"active","routerLink","routerLinkActiveOptions",4,"ngFor","ngForOf"],[1,"nav-container"],[1,"label","label-success"],[4,"ngIf"],[1,"nav"],[1,""],[1,"nav-rside-btns"],["class","back-style-btn",3,"matMenuTriggerFor",4,"ngIf"],["sendBackMenu","matMenu"],["mat-menu-item","",3,"click",4,"ngFor","ngForOf"],["class","",4,"ngIf"],[1,"legist-text"],[1,"bold-2"],[1,"suit-container"],["class","suit-box",4,"ngIf"],[1,"time-box"],[1,"icon","icon-2"],[1,"mb-0","time-text"],[1,"time-ln","bold-1"],[1,"back-style-btn",3,"matMenuTriggerFor"],[1,"rep-icon"],[1,"button-text"],["mat-menu-item","",3,"click"],[1,"nav-download-btn",3,"click"],[4,"ngFor","ngForOf"],[1,"suit-box"],[1,"medium-text","bold-3","mb-0"],["class","view-box",4,"ngIf"],[1,"view-box"],[1,"small-text","bold-2","mb-0","pointer"],[1,"view-status",3,"routerLink"],[1,"color-bar"],["class","color-box pointer",3,"matTooltip","green","orange","grey",4,"ngFor","ngForOf"],[1,"color-box","pointer",3,"matTooltip"],["mat-tab-link","","routerLinkActive","",3,"active","routerLink","routerLinkActiveOptions"],["rla","routerLinkActive"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"section",2),e.YNc(3,Ne,29,13,"div",3),e.qZA(),e.TgZ(4,"section"),e.YNc(5,Le,2,1,"div",4),e.qZA(),e.TgZ(6,"div",5)(7,"nav",6),e.YNc(8,je,3,7,"a",7),e.qZA(),e._UZ(9,"router-outlet"),e.qZA()()()),2&t&&(e.xp6(3),e.Q6J("ngIf",n.currentRequest),e.xp6(2),e.Q6J("ngIf",n.currentRequestStrip),e.xp6(3),e.Q6J("ngForOf",n.requestLinks))},directives:[u.O5,Z.p6,M.Hw,Z.VK,u.sg,Z.OP,h.yS,P.gM,U.BU,U.Nj,h.Od,h.lC],pipes:[u.uU],styles:['.main-bar[_ngcontent-%COMP%]{display:flex;flex-direction:column}.btn[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;border-radius:50%;border:none}.icon[_ngcontent-%COMP%]{font-size:1rem;height:1rem;width:1rem}.icon-2[_ngcontent-%COMP%]{font-size:1.2rem}.sections[_ngcontent-%COMP%]{display:flex;flex-direction:column;padding:1.75rem;width:100%}.nav-container[_ngcontent-%COMP%]{margin-bottom:1.5rem}.nav[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;margin-bottom:.75rem}.nav-back-arrow[_ngcontent-%COMP%] > a[_ngcontent-%COMP%], .view-status[_ngcontent-%COMP%]{color:unset;text-decoration:none}.nav-rside-btns[_ngcontent-%COMP%]{display:flex;gap:.625rem}.back-style-btn[_ngcontent-%COMP%]{font-weight:500;font-size:14px;width:8rem;height:2.9rem;color:var(--white);background-color:#fa7022;border:1px solid rgba(0,0,0,.2);border-radius:5px;transition:.1s;display:flex;align-items:center}.button-text[_ngcontent-%COMP%]{margin-left:5px}.rep-icon[_ngcontent-%COMP%]{font-size:1.5rem}.back-style-btn[_ngcontent-%COMP%]:hover, .back-style-btn[_ngcontent-%COMP%]:active{background-color:var(--black-3);color:var(--white);transform:scale(1.04)}.nav-download-btn[_ngcontent-%COMP%]{padding:.7rem;font-weight:500;font-size:14px;width:8rem;height:2.9rem;color:var(--white);background-color:#db414ae6;border:1px solid rgba(0,0,0,.2);border-radius:5px}.nav-download-btn[_ngcontent-%COMP%]:hover{color:var(--white);background-color:#0b1320}.nav-download-btn[_ngcontent-%COMP%]:disabled{background-color:#808080b3;color:#fff9;border:1px solid rgba(0,0,0,.1);cursor:not-allowed}.suit-container[_ngcontent-%COMP%], .suit-box[_ngcontent-%COMP%], .time-box[_ngcontent-%COMP%], .person-box[_ngcontent-%COMP%], .assign-box[_ngcontent-%COMP%], .profile-pic[_ngcontent-%COMP%]{display:flex;align-items:center}.legist-text[_ngcontent-%COMP%]{margin-bottom:1.4rem;font-size:14px}.suit-container[_ngcontent-%COMP%]{margin-bottom:2.5rem}.view-box[_ngcontent-%COMP%]{border:1px solid var(--black-3);padding:0rem .5rem;border-radius:5px;color:#14142b;text-align:center}.suit-box[_ngcontent-%COMP%]{gap:1rem}.time-box[_ngcontent-%COMP%]{margin-left:5%;gap:.6rem}.time-ln[_ngcontent-%COMP%]{margin-right:.6rem;opacity:.7}.time-text[_ngcontent-%COMP%]{font-size:13px;color:#14142b}.assignee[_ngcontent-%COMP%]{margin-left:.4rem;font-size:13px}.person-box[_ngcontent-%COMP%]{margin-left:auto}.assign-box[_ngcontent-%COMP%]{margin-right:1rem}.assignee-img[_ngcontent-%COMP%]{height:1.7rem;width:1.7rem}.members[_ngcontent-%COMP%]{font-size:13px;color:#14142bb3}.color-bar[_ngcontent-%COMP%]{display:flex;align-self:center;justify-content:space-between;height:3.5rem;background-color:var(--white);margin-bottom:2.5rem;padding:1rem;position:relative;box-shadow:0 2px 5px 3px #00000003;border-radius:6px}.color-bar[_ngcontent-%COMP%]:before{content:"";display:block;width:95%;border-top:1px solid #e2e2e2;position:absolute;top:2rem}.color-box[_ngcontent-%COMP%]{width:1.9rem;height:1.9rem;border-radius:50%;z-index:1}.green[_ngcontent-%COMP%]{background-color:#08ce40}.orange[_ngcontent-%COMP%]{background-color:#fa6009e6}.grey[_ngcontent-%COMP%]{background-color:#e2e2e2}.mat-tab-link[_ngcontent-%COMP%]{border:1px solid #ccc}.mat-tab-label-active[_ngcontent-%COMP%]{color:#fa7022;border-bottom-color:#fa7022}.tab-panel[_ngcontent-%COMP%]{width:100%}  .mat-tooltip{color:#14142b!important;font-size:.8rem}button.mat-menu-item[_ngcontent-%COMP%]:hover{background-color:#696969}@media screen and (max-width: 1280px){.tab-panel[_ngcontent-%COMP%]{width:100%}}']}),o})(),children:[{path:"",redirectTo:"trail",pathMatch:"full"},{path:"trail",component:ee},{path:"internal-conversations",component:z},{path:"counsel-conversations",component:_e},{path:"files",component:ne}]}];let De=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[h.Bz.forChild(Ye)],h.Bz]}),o})();var Ve=l(393);let He=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[u.ez,B.m,De,Ve.Cl]]}),o})()}}]);